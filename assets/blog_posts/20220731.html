<h3>TCA 2.1 Systemsettings add-on stuck in Processing status</h3>
<div class='blog_meta'>
	<p><i class='fa-regular fa-calendar'></i> Jul 31, 2022</p>
	<button>TCA</button>
	<p>Share on: <a href='https://twitter.com/intent/tweet?text=TCA%202.1%20Systemsettings%20add-on%20stuck%20in%20Processing%20status&url=https%3a%2f%2ffbuechsel.eu%2fpost%2fnfv%2ftca21systemsettingsaddon%2f&tw_p=tweetbutton' target='_blank' title='Share on Twitter' rel='noopener' aria-label='Share this blog post to Twitter (opens in a new tab)'><i class='fa-brands fa-twitter' style='color: #ffffff;'></i></a>
		<a href='https://www.facebook.com/sharer.php?u=https%3a%2f%2ffbuechsel.eu%2fpost%2fnfv%2ftca21systemsettingsaddon%2f&t=TCA%202.1%20Systemsettings%20add-on%20stuck%20in%20Processing%20status' target='_blank' title='Share on Facebook' rel='noopener' aria-label='Share this blog post to Facebook (opens in a new tab)'><i class='fa-brands fa-square-facebook' style='color: #ffffff;'></i></a>
		<a href='https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ffbuechsel.eu%2Fpost%2Fnfv%2Ftca21systemsettingsaddon%2F%23linkedinshare' target='_blank' title='Share on LinkedIn' rel='noopener' aria-label='Share this blog post to LinkedIn (opens in a new tab)'><i class='fa-brands fa-linkedin' style='color: #ffffff;'></i></a>
		<i class='fa-solid fa-copy' style='color: #ffffff;' onclick='copyMe("https://fbuechsel.eu/post/nfv/tca21systemsettingsaddon/")' title='Copy link' aria-label='Copy the link to this blog post to your clipboard'></i></p>
</div>
<div class='blog_content'>
	<p>When deploying a v2 cluster you may notice that an input field for the capv user password is missing. To be able to set a password you will have to deploy the systemsettings cluster add-on, however with following the default wizard settings the add-on deployment gets stuck.</p>
	<br>
	<p>Not only does the add-on deployment get stuck, but also none of the settings get applied to the actual cluster. The main symptom can be seen in the picture below.</p>
	<div class='blog_img'><button class='img_scale'><img src='assets/images/blog_images/20220731-1.png'></button></div>
	<p class='img_desc'>Figure 1: Systemsettings add-on stuck in processing state</p>
	<br>
	<p>The most likely cause is that during the configuration of the add-on the wizard was filled out in the following fashion:</p>
	<div class='blog_img'><button class='img_scale'><img src='assets/images/blog_images/20220731-2.png'></button></div>
	<p class='img_desc'>Figure 2: Systemsettings add-on wizard</p>
	<br>
	<p>Notice the empty field for a syslog server, if you intended to configure the new fluentbit add-on for syslog a configuration like this should make sense, however this causes some internal issues with empty yaml strings. Next to the port entry field you can see a red x which lets you delete the whole syslog configuration like shown in the picture below.</p>
	<div class='blog_img'><button class='img_scale'><img src='assets/images/blog_images/20220731-3.png'></button></div>
	<p class='img_desc'>Figure 3: Systemsettings syslog configuration removed</p>
	<br>
	<p>Once this is corrected (this can be done prior to deploying the add-on or by editing the add-on), the settings will eventually reconcile and the passwword set correctly on the cluster.</p>
	<div class='blog_img'><button class='img_scale'><img src='assets/images/blog_images/20220731-4.png'></button></div>
	<p class='img_desc'>Figure 4: Successfully provisioned Systemsettings add-on</p>
</div>